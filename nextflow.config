/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  mpieva/quicksand Nextflow config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  Default config options
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

manifest {
    name             = 'mpieva/quicksand'
    author           = 'Merlin Szymanski'
    homePage         = 'https://mpieva.github.io/quicksand/'
    description      = 'quick analysis of sedimentary ancient DNA'
    nextflowVersion  = '>=22.10'
    version          = 'v2.0'
}

cleanup = true
nextflow.enable.moduleBinaries = true

profiles {
    docker {
        docker.enabled         = true
        singularity.enabled    = false
    }
    singularity {
        docker.enabled         = false
        singularity.enabled    = true
        singularity.autoMounts = true
    }
    debug {
        cleanup                = false
    }
}


params {

    //basic_settings
    help           = false // TODO //not working

    //user input
    bam            = ""   // DONE //multiplexed BAM file, containing merged reads
    by             = ""   // DONE //readgroup index information
    split          = ""   // DONE //alternative input: folder with already splitted files (BAM, FASTQ)
    genomes        = ""   // DONE //folder with reference genomes fasta-files
    db             = ""   // DONE //kraken1 db for krakenuniq
    bedfiles       = ""   // DONE //bedfiles (dust-masking) for the genomes in --genomes
    fixed          = ""   // TODO Specify the reference genome for assigned families
    rerun          = false // TODO

    //optional input
    taxlvl         = 'f'  // extract reads on the given taxonomic level
    //

    //process settings
    bamfilterflag             = 1    // DONE // 1=filter paired, 4=filter unmapped
    bamfilter_length_cutoff   = 35   // DONE // filter out reads shorter < 35bp
    mapbwa_quality_cutoff     = 25   // DONE // filter out mapped reads with qualityscore < 25
    krakenuniq_min_kmers      = 129  // DONE // filter out families with < 129 kmers assined
    krakenuniq_min_reads      = 3    // DONE // filter out families with < 3 reads assigned
    compression_level         = 0    // DONE // bgzf compression level for intermediate files, 0..9
}

includeConfig "conf/modules.config"